# Callback

**콜백함수란?**

- 이름 그대로 나중에 호출되는 함수를 말한다.
- 특정함수에 매개변수로 전달된 함수를 의미한다.
- 콜백 함수는 코드를 통해 명시적으로 호출하는 함수가 아니라, 개발자는 단지 함수를 등록 하기만 하고, 어떤 이벤트가 발생했거나 특정 시점에 도달했을 때 시스템에서 호출하는 함수를 말한다.

콜백 함수에는 동기,비동기가 있다.

- synchronous callback
- asynchronous callback

대표적인 콜백 함수의 사용 예로는 자바스크립트에서 이벤트 핸들러 처리이다.

```jsx
<button id="button1" onclick="button1_click();">버튼1</button>
<script>
function button1_click() {
	alert("버튼1을 누르셨습니다.");
}
</script>
```

Html에 onclick에 button1_click함수는 브라우저의 javascript API에서 DOM 이벤트 핸들러에 전달(등록)되고, 해당 버튼에 클릭이벤트가 발생했을 이벤트 핸들러가 콜백함수를 호출한다.

```jsx
$( "#target" ).click(function() {
  alert( "Handler for .click() called." );
});
```

위처럼 Jquery에서도 콜백함수를 자주 사용하게 된다.

콜백함수란 특정함수에 전달되어 특정함수가 어떤조건에 의해 호출하는 함수라고 후려칠수 있겠다.

## Callback을 활용한 비동기적 프로그래밍

**비동기적 테크닉**
 : 소중한 싱글스레드의 멈춤을 방지한다. 즉 블록킹을 방지하여 싱글스레드가 논블록킹으로 동작하게 한다.

### **비동기적 테크닉을 사용하는 경우**

**1.사용자 이벤트 처리**

브라우저 화면에서 발생하는 사용자의 이벤트는 예측이 불가능하다.따라서 이런 화면이벤트를 관리담당하는 녀석에게 우리는 특정이벤트가 발생할 때 호출을 원하는 내용을 callback 함수에 전달하게 된다.

**2.네트워크 응답 처리**

화면단에서 서버에게 요청을 보냈을 때, 그 응답이 언제 올지 알 수 없다.따라서 이런 서버에 대한 응답처리 등도 비동기적으로 처리해야 한다.

**3.파일을 읽고 쓰는 등의 파일 시스템 작업**

**4.의도적으로 시간 지연을 사용하는 기능(알람 등)**

위와 같이 이벤트 등을 기다리는데 하나뿐인 소중한 스레드를 사용한다면, 또 서버의 응답을 기다리기 위해 하나뿐인 소중한 스레드를 사용한다면…사용자는 멈춰져 있는 화면을 보게되는 것이다.위와 같이 스레드의 블록킹을 야기하는 작업은 필수적으로 비동기적 프로그래밍을 해야 한다.

## Callback함수 비동기적 사용의 예

비동기적 프로그래밍을 하기 위해서는, **비동기적으로 콜백함수를 호출하는 함수**에게 **비동기적으로 호출되기를 원하는 코드**를 **콜백함수**에 담아서 전달해야 한다.

```jsx
function fn_fakeAsync(callback){
  calback();
}

console.log("------- fn_fakeAsync 호출 직전 -------");

fn_fakeAsync(function(){
  console.log("이게 비동기적으로 동작하길 바래");
});

console.log("------- fn_fakeAsync 호출 이후 -------");
```

## callBack 지옥

```
function Callback(callback){
    console.log('콜백 함수');
    callback();
}
Callback(() => {
    console.log('콜백을 받는곳!')
})
```

- 가독성이 떨어짐
- 비즈니스 로직을 한 눈에 보기 어려움
- 에러가 발생했을때, 문제를 찾기 어려움
- 유지보수가 어렵다